<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="linked_sendMessage_proxy_NS" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
  <target>
    <inSequence>
       <property xmlns:ns="wso2.connector.linkedin.sendmessage" name="appUri" expression="//ns:appUri/text()"/>
      <property xmlns:ns="wso2.connector.linkedin.sendmessage" name="accessToken" expression="//ns:accessToken/text()"/>
      <property xmlns:ns="wso2.connector.linkedin.sendmessage" name="recipients" expression="//ns:recipients/descendant::recipient"/>
      <property xmlns:ns="wso2.connector.linkedin.sendmessage" name="subject" expression="//ns:subject/text()"/>
      <property xmlns:ns="wso2.connector.linkedin.sendmessage" name="messageBody" expression="//ns:messageBody/text()"/>
      <linkedin.init>
	    <appUri>{$ctx:appUri}</appUri>
	    <accessToken>{$ctx:accessToken}</accessToken>
      </linkedin.init>
      <linkedin.sendMessage>
        <messageBody>{$ctx:messageBody}</messageBody>
        <recipients>{$ctx:recipients}</recipients>
        <subject>{$ctx:subject}</subject>
      </linkedin.sendMessage>
      <respond />
    </inSequence>
    <outSequence>
      <log></log>
      <send></send>
    </outSequence>
  </target>
</proxy>
