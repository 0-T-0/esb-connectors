<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="tradegecko_createInvoice"
       transports="https,http"
       statistics="disable"
       trace="disable"
       startOnLoad="true">
   <target>
      <inSequence onError="faultHandlerSeq">
         <property name="apiUrl" expression="json-eval($.apiUrl)"/>
         <property name="accessToken" expression="json-eval($.accessToken)"/>
         <property name="orderId" expression="json-eval($.orderId)"/>
         <property name="billingAddressId" expression="json-eval($.billingAddressId)"/>
         <property name="shippingAddressId" expression="json-eval($.shippingAddressId)"/>
         <property name="paymentTermId" expression="json-eval($.paymentTermId)"/>
         <property name="invoicedAt" expression="json-eval($.invoicedAt)"/>
         <property name="dueAt" expression="json-eval($.dueAt)"/>
         <property name="notes" expression="json-eval($.notes)"/>
         <property name="invoiceLineItems" expression="json-eval($.invoiceLineItems)"/>
         <tradegecko.init>
            <apiUrl>{$ctx:apiUrl}</apiUrl>
            <accessToken>{$ctx:accessToken}</accessToken>
         </tradegecko.init>
         <tradegecko.createInvoice>
            <orderId>{$ctx:orderId}</orderId>
            <billingAddressId>{$ctx:billingAddressId}</billingAddressId>
            <shippingAddressId>{$ctx:shippingAddressId}</shippingAddressId>
            <paymentTermId>{$ctx:paymentTermId}</paymentTermId>
            <invoicedAt>{$ctx:invoicedAt}</invoicedAt>
            <dueAt>{$ctx:dueAt}</dueAt>
            <notes>{$ctx:notes}</notes>
            <invoiceLineItems>{$ctx:invoiceLineItems}</invoiceLineItems>
         </tradegecko.createInvoice>
         <respond/>
      </inSequence>
      <outSequence>
         <log/>
         <send/>
      </outSequence>
   </target>
   <description/>
</proxy>
                                