<?xml version="1.0" ?>
<proxy name="tradegecko_createInvoiceLineItem" startOnLoad="true" statistics="disable" trace="disable" transports="https,http" xmlns="http://ws.apache.org/ns/synapse">
    <target>
        <inSequence onError="faultHandlerSeq">
        	<property expression="json-eval($.apiUrl)" name="apiUrl" />
        	<property expression="json-eval($.accessToken)" name="accessToken" />
            <property expression="json-eval($.quantity)" name="quantity"/>
            <property expression="json-eval($.position)" name="position"/>
            <property expression="json-eval($.invoiceId)" name="invoiceId"/>
            <property expression="json-eval($.orderLineItemId)" name="orderLineItemId"/>
            <property expression="json-eval($.ledgerAccountId)" name="ledgerAccountId"/>
            <tradegecko.init>
            	<apiUrl>{$ctx:apiUrl}</apiUrl>
            	<accessToken>{$ctx:accessToken}</accessToken>
            </tradegecko.init>
            <tradegecko.createInvoiceLineItem>
                <quantity>{$ctx:quantity}</quantity>
                <position>{$ctx:position}</position>
                <invoiceId>{$ctx:invoiceId}</invoiceId>
                <orderLineItemId>{$ctx:orderLineItemId}</orderLineItemId>
                <ledgerAccountId>{$ctx:ledgerAccountId}</ledgerAccountId>
            </tradegecko.createInvoiceLineItem>
            <respond/>
        </inSequence>
        <outSequence>
            <log/>
            <send/>
        </outSequence>
    </target>
    <description/>
</proxy>