<template name="initAclHeaders" xmlns="http://ws.apache.org/ns/synapse">
	

	<sequence>
		
		<filter
			xpath="(not(get-property('xAmzAclValue') = '' or (not(string(get-property('xAmzAclValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-acl" expression="get-property('xAmzAcl')" scope="transport"
					type="STRING" />
			</then>
		</filter>
		
		
		<filter
			xpath="(not(get-property('xAmzGrantReadValue') = '' or (not(string(get-property('xAmzGrantReadValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-grant-read" expression="get-property('xAmzGrantReadValue')"
					scope="transport" type="STRING" />
			</then>
		</filter>
		
		<filter
			xpath="(not(get-property('xAmzGrantWriteValue') = '' or (not(string(get-property('xAmzGrantWriteValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-grant-write" expression="get-property('xAmzGrantWriteValue')"
					scope="transport" type="STRING" />
			</then>
		</filter>

		<filter
			xpath="(not(get-property('xAmzGrantReadAcpValue') = '' or (not(string(get-property('xAmzGrantReadAcpValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-grant-read-acp" expression="get-property('xAmzGrantReadAcpValue')"
					scope="transport" type="STRING" />
			</then>
		</filter>

		<filter
			xpath="(not(get-property('xAmzGrantWriteAcpValue') = '' or (not(string(get-property('xAmzGrantWriteAcpValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-grant-write-acp" expression="get-property('xAmzGrantWriteAcpValue')"
					scope="transport" type="STRING" />
			</then>
		</filter>

		<filter
			xpath="(not(get-property('xAmzGrantFullControlValue') = '' or (not(string(get-property('xAmzGrantFullControlValue'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd"
					xmlns:ns="http://org.apache.synapse/xsd" xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
					name="x-amz-grant-full-control" expression="get-property('xAmzGrantFullControlValue')"
					scope="transport" type="STRING" />
			</then>
		</filter>
<filter
			xpath="(not(get-property('date') = '' or  (not(string(get-property('date'))))))">
			<then>
				<property xmlns:ns2="http://org.apache.synapse/xsd" xmlns:ns="http://org.apache.synapse/xsd"
					xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope" name="Date"
					expression="get-property('date')" scope="transport" type="STRING" />

			</then>
		</filter>
		

	</sequence>
</template>